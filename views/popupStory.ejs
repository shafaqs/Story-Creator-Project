<!DOCTYPE html>
<html lang="en">
head>
<title>Story Page</title>


<!-- Font Awesome Library -->
<script src="https://kit.fontawesome.com/84c46e54c3.js" crossorigin="anonymous"></script>

<!-- Fonts Link Tag -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
  href="https://fonts.googleapis.com/css2?family=Bungee&family=Source+Sans+Pro:ital,wght@0,300;0,600;1,300;1,600&display=swap"
  rel="stylesheet">

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="/styles/single_story.css" type="text/css" />

<script src="/vendor/jquery-3.0.0.js"></script>
<script defer src="/scripts/app.js"></script>
<script type="text/javascript" src="../public/scripts/app.js"></script>
<%- include('partials/header.ejs') %>
  </head>

  <!-- popupStory.ejs -->
  <div id="popupStoryModal" class="modal">
    <!-- Modal content -->
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <h1>
        <%= story.title %>
      </h1>
      <h2>By <%= story.author %>
      </h2>
      <p>
        <%= story.text %>
      </p>
      <% if (story) { %>
        <h1>
          <%= story.title %>
        </h1>
        <h2>By <%= story.author %>
        </h2>
        <% } else { %>
          <h1>Story not found</h1>
          <% } %>
            <% if (story.status==='ongoing' ) { %>
              <form action="/stories/<%= story._id %>/contribute" method="POST">
                <textarea name="contribution"></textarea>
                <button type="submit">Contribute</button>
              </form>
              <% } %>
    </div>
  </div>

  <style>
    /* Popup Story Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: auto;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      position: relative;
      background-color: #fefefe;
      margin: 15% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
    }

    .close-btn {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close-btn:hover,
    .close-btn:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }
  </style>

  <script>
    // Get the modal element
    const modal = document.getElementById('popupStoryModal');
    // Get the close button
    const closeBtn = document.querySelector('.close-btn');

    // When the user clicks the "Read" button, open the modal
    function openModal(e) {
      e.preventDefault();
      modal.style.display = 'block';
    }

    // When the user clicks on the close button, close the modal
    function closeModal() {
      modal.style.display = 'none';
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target === modal) {
        modal.style.display = 'none';
      }
    }
  </script>

</html>
